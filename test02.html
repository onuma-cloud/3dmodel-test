<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>Vision Pro 360°動画 自動再生</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- 360度動画スフィア -->
      <a-videosphere 
        id="sphere" 
        src="#myVideo" 
        rotation="0 -90 0"
        material="shader: flat">
      </a-videosphere>

      <!-- カメラ -->
      <a-entity camera look-controls position="0 1.6 0"></a-entity>

      <!-- 動画ソース -->
      <video 
        id="myVideo" 
        src="kadai.mp4" 
        autoplay 
        loop 
        muted 
        playsinline 
        webkit-playsinline 
        crossorigin="anonymous">
      </video>
    </a-scene>

    <script>
      // Vision Proでは video.play() を明示的に呼ぶと安定する
      window.addEventListener('DOMContentLoaded', () => {
        const video = document.getElementById('myVideo');
        const tryPlay = () => {
          video.play().catch(err => {
            console.warn("自動再生ブロック: ", err);
          });
        };
        // ページロード時に繰り返し試す（Vision Pro用）
        tryPlay();
        setTimeout(tryPlay, 1000);
        setTimeout(tryPlay, 3000);
      });
    </script>
  </body>
</html>
